{% extends 'app/base.html' %}

{% block title %}旅游数据分析系统 - 价格分布分析{% endblock %}

{% block extra_css %}
    <!-- Add any specific CSS for this page if needed -->
    <link rel="stylesheet" href="/static/css/dashboard-page.css">
{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-md-12">
            <h1 class="page-header">价格分布分析</h1>
        </div>
    </div>

    <section class="section dashboard">
        <div class="row">
            <div class="col-lg-6">

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">景点价格分析</span></h5>
                        <div id="mains" style="width:100%;height: 450px"></div>


                    </div>
                </div>

            </div>
            <div class="col-lg-6">

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">景点销量分析</span></h5>
                        <div id="mainsTwo" style="width:100%;height: 450px"></div>


                    </div>
                </div>

            </div>
            <div class="col-lg-6">

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">折扣占比分析</span></h5>
                        <div id="mainsThree" style="width:100%;height: 450px"></div>


                    </div>
                </div>

            </div>

        </div>
    </section>


{% endblock %}

{% block echarts %}
    <script>
        var chartDom = document.getElementById('mains');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
            title: {
                text: '景点价格趋势分析'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross'
                }
            },
            legend: {},
            toolbox: {
                show: true,
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                // prettier-ignore
                data: {{ echartsData.xData  |safe}}
            },
            yAxis: {
                type: 'value',
                axisLabel: {
                    formatter: '{value} 个'
                },
                axisPointer: {
                    snap: true
                }
            },
            visualMap: {
                show: false,
                dimension: 0,
                pieces: [
                    {
                        lte: 0,
                        color: 'green'
                    },
                    {
                        gt: 0,
                        lte: 1,
                        color: 'red'
                    },
                    {
                        gt: 1,
                        lte: 4,
                        color: 'green'
                    },
                    {
                        gt: 4,
                        lte: 5,
                        color: 'red'
                    },
                    {
                        gt: 5,
                        color: 'green'
                    }
                ]
            },
            series: [
                {
                    name: '价格区间个数',
                    type: 'line',
                    smooth: true,
                    // prettier-ignore
                    data: {{ echartsData.yData }},
                    markArea: {
                        itemStyle: {
                            color: 'rgba(255, 173, 177, 0.4)'
                        },
                        data: [
                            [
                                {
                                    name: '起伏趋势较高',
                                    xAxis: '免费'
                                },
                                {
                                    xAxis: '100元以内'
                                }
                            ],
                            [
                                {
                                    name: '较为平缓',
                                    xAxis: '400元以内'
                                },
                                {
                                    xAxis: '500元以内'
                                }
                            ]
                        ]
                    }
                }
            ]
        };

        option && myChart.setOption(option);

    </script>
    <script>
        var chartDom = document.getElementById('mainsTwo');
        var myChart = echarts.init(chartDom);
        var option;
        option = {
            xAxis: {
                type: 'category',
                data: {{ echartsData.x1Data |safe }},
            },
            yAxis: {
                type: 'value',
                name: '销量个数',
            },
            legend: {},
            dataZoom: [
                {
                    show: true,
                    start: 0,
                    end: 20
                }
            ],
            series: [{
                name: '销量个数',
                type: 'bar',
                data: {{ echartsData.y1Data }},
                itemStyle: {
                    color: '#2f4554', // 柱状图颜色
                    emphasis: {
                        color: '#c23531', // 鼠标悬停时的颜色
                    }
                },
                label: {
                    show: true,
                    position: 'top',
                }
            }],
            animationEasing: 'elasticOut', // 动画效果
            animationDelay: function (idx) {
                return idx * 100; // 动画延迟时间
            },
        }
        option && myChart.setOption(option);
    </script>
{% endblock %}