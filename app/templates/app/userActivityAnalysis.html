{% extends 'app/base.html' %}

{% block title %}旅游数据分析系统 - 用户行为分析{% endblock %}

{% block extra_css %}
    <!-- Add any specific CSS for this page if needed -->
    <link rel="stylesheet" href="/static/css/dashboard-page.css">
{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-md-12">
            <h1 class="page-header">用户行为分析</h1>
        </div>
    </div>

    <section class="section dashboard">
        <div class="row">
            <!-- Sales Volume Chart -->
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">登录时间分布</h5>
                        <div id="userActivity" style="width:100%;height: 600px"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block extra_js %}
    <!-- ECharts图表库 -->
    <script src="/static/plugins/echarts/echarts.min.js"></script>
    <script src="/static/plugins/echarts/china.js"></script>
    <script>
        var chartDom = document.getElementById('userActivity');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
            tooltip: {
                position: 'top'
            },
            grid: {
                height: '50%',
                top: '10%'
            },
            xAxis: {
                type: 'category',
                data: [
                    '1', '2', '3', '4', '5', '6',
                    '7', '8', '9', '10', '11', '12',
                    '13', '14', '15', '16', '17', '18',
                    '19', '20', '21', '22', '23', '24',
                    '25', '26', '27', '28', '29', '30',
                    '31'
                ],
                splitArea: {
                    show: true
                }
            },
            yAxis:
                {
                    type: 'category',
                    data: [
                        '0', '1', '2', '3', '4', '5', '6',
                        '7', '8', '9', '10', '11',
                        '12', '13', '14', '15', '16', '17',
                        '18', '19', '20', '21', '22', '23'
                    ],
                    inverse: true,

                    splitArea:
                        {
                            show: true
                        }
                },
            visualMap: {
                min: 0,
                max:
                    20,
                calculable:
                    true,
                orient:
                    'horizontal',
                left:
                    'center',
                bottom:
                    '15%'
            },
            series: [
                {
                    name: 'Punch Card',
                    type: 'heatmap',
                    data: {{results}},
                    label: {
                        show: true
                    },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 20,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        option && myChart.setOption(option);

    </script>
{% endblock %}