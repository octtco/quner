{% extends 'app/base.html' %}

{% block title %}旅游数据分析系统 - 修改个人信息{% endblock %}

{% block extra_css %}
    <!-- 自定义CSS -->
    <link rel="stylesheet" href="/static/css/dashboard-page.css">
{% endblock %}

{% block content %}

    <div class="row">
        <div class="col-md-12">
            <h1 class="page-header">修改个人信息</h1>
        </div>
    </div>

    <div class="container mt-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">编辑您的个人资料</h5>

{#                <!-- 显示消息 -->#}
{#                {% if messages %}#}
{#                    <div class="alert alert-info" role="alert">#}
{#                        {% for message in messages %}#}
{#                            {{ message }}#}
{#                        {% endfor %}#}
{#                    </div>#}
{#                {% endif %}#}

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- 用户名 -->
                    <div class="mb-3 row">
                    <label class="col-sm-2 col-form-label">用户名</label>
                    <div class="col-sm-10">
                        <p class="form-control-plaintext">{{ user.username }}</p>
                        <!-- 隐藏字段用于表单提交 -->
                        <input type="hidden" name="username" value="{{ user.username }}">
                    </div>
                    </div>

                    <!-- 头像 -->
                    <div class="row mb-3">
                        <label for="inputText" class="col-sm-2 col-form-label">头像上传</label>
                        <div class="col-sm-10">
                            <img style="width:100px;border:1px solid #ddd;padding:5px"
                                 src="/media/{{ user.avatar }}" alt="">
                            <br>
                            <input type="file" name="avatar">
                        </div>
                    </div>

                    <!-- 简介 -->
                    <div class="mb-3 row">
                        <label class="col-sm-2 col-form-label">个人简介</label>
                        <input type="text" name="shortinfo" placeholder="{{ user.textarea }}"
                               class="form-control form-control-lg">
                    </div>

                    <!-- 提交按钮 -->
                    <div class="row">
                        <div class="col-sm-10 offset-sm-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fa fa-save me-2"></i> 保存更改
                            </button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

{% endblock %}
